<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Decathlon Calculator</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-4">
  <h2 class="mb-4">Decathlon Results & Points Calculator</h2>

  <!-- TRACK EVENTS -->
  <h4>Track Events</h4>
  <div class="row g-3">
    <div class="col-md-3">
      <label>100 m (sec)</label>
      <input type="number" step="0.01" id="m100" class="form-control">
    </div>
    <div class="col-md-3">
      <label>400 m (sec)</label>
      <input type="number" step="0.01" id="m400" class="form-control">
    </div>
    <div class="col-md-3">
      <label>110 m Hurdles (sec)</label>
      <input type="number" step="0.01" id="h110" class="form-control">
    </div>
    <div class="col-md-3">
      <label>1500 m (sec)</label>
      <input type="number" step="0.1" id="m1500" class="form-control">
    </div>
  </div>

  <!-- FIELD EVENTS -->
  <h4 class="mt-4">Field Events</h4>
  <div class="row g-3">
    <div class="col-md-3">
      <label>Long Jump (m)</label>
      <input type="number" step="0.01" id="lj" class="form-control">
    </div>
    <div class="col-md-3">
      <label>Shot Put (m)</label>
      <input type="number" step="0.01" id="sp" class="form-control">
    </div>
    <div class="col-md-3">
      <label>High Jump (m)</label>
      <input type="number" step="0.01" id="hj" class="form-control">
    </div>
    <div class="col-md-3">
      <label>Discus (m)</label>
      <input type="number" step="0.01" id="dt" class="form-control">
    </div>
    <div class="col-md-3">
      <label>Pole Vault (m)</label>
      <input type="number" step="0.01" id="pv" class="form-control">
    </div>
    <div class="col-md-3">
      <label>Javelin (m)</label>
      <input type="number" step="0.01" id="jt" class="form-control">
    </div>
  </div>

  <button class="btn btn-primary mt-4" onclick="calculateTotal()">Calculate Total Points</button>

  <h3 class="mt-3">Total Points: <span id="total">0</span></h3>

  <hr class="my-4">

  <!-- POINTS TO TIME -->
  <h4>Points â†’ Required 100 m Time</h4>
  <div class="row g-3">
    <div class="col-md-4">
      <label>Target Points</label>
      <input type="number" id="targetPoints" class="form-control">
    </div>
    <div class="col-md-4">
      <label>Required 100 m Time (sec)</label>
      <input type="text" id="requiredTime" class="form-control" readonly>
    </div>
  </div>

  <button class="btn btn-secondary mt-3" onclick="pointsToTime()">Calculate Time</button>
</div>

<script>
/* IAAF constants (example set) */
const events = {
  m100: { A: 25.4347, B: 18, C: 1.81, type: "track" },
  m400: { A: 1.53775, B: 82, C: 1.81, type: "track" },
  h110: { A: 5.74352, B: 28.5, C: 1.92, type: "track" },

  lj: { A: 0.14354, B: 220, C: 1.4, type: "field", factor: 100 },
  sp: { A: 51.39, B: 1.5, C: 1.05, type: "field" },
  hj: { A: 0.8465, B: 75, C: 1.42, type: "field", factor: 100 },
  dt: { A: 12.91, B: 4, C: 1.1, type: "field" },
  pv: { A: 0.2797, B: 100, C: 1.35, type: "field", factor: 100 },
  jt: { A: 10.14, B: 7, C: 1.08, type: "field" },
  m1500: { A: 0.03768, B: 480, C: 1.85, type: "track" }
};

function score(event, P) {
  const e = events[event];
  if (e.factor) P *= e.factor;

  return e.type === "track"
    ? Math.floor(e.A * Math.pow(e.B - P, e.C))
    : Math.floor(e.A * Math.pow(P - e.B, e.C));
}

function calculateTotal() {
  let total = 0;
  for (let id in events) {
    const val = document.getElementById(id)?.value;
    if (val) total += score(id, Number(val));
  }
  document.getElementById("total").innerText = total;
}

function pointsToTime() {
  const pts = Number(document.getElementById("targetPoints").value);
  const e = events.m100;

  const time = e.B - Math.pow(pts / e.A, 1 / e.C);
  document.getElementById("requiredTime").value = time.toFixed(2);
}
</script>

</body>
</html>
